# 学生选课系统实验报告
## 一、问题描述
学生选课系统在大学教育中扮演着至关重要的角色，它不仅关系到学生能否达到毕业要求，更是一个复杂的问题，涉及多方面因素。本实验旨在设计一个学生选课系统，通过构建左孩子右兄弟二叉树表示课程体系，实现对选课方案的优化，使学生所选课程数目最少，同时满足毕业所需学分及先修课程优先的原则。

大学实行学分制度，每门课程都有一定学分，学生需要修满规定数量的课程才能毕业。有些课程有先修课程的要求，例如，《数据结构》必须在选修了《程序设计基础》之后才能选修。为了解决这一问题，我们设计了一个学生选课系统，支持存储课程体系、转换为左孩子右兄弟二叉树表示、进行遍历操作，并生成选课方案。

## 二、代码实现
我们设计了一个CourseSystem类，其中使用TreeNode类表示树的节点。通过build_tree_from_file方法，我们将课程体系文件解析成左孩子右兄弟二叉树，为后续操作提供了数据结构基础。同时，实现了先序、中序、后序遍历方法，以便更好地了解课程的层次结构。

```TreeNode 类```
```
class TreeNode:
    def __init__(self, CourseID, credit):
        self.CourseID = CourseID
        self.credit = credit
        self.child = None
        self.sibling = None
```
```TreeNode 类```表示课程体系中的节点，包括课程编号 ```CourseID```、学分 ```credit```、子节点 ```child``` 和兄弟节点 ```sibling```。

``CourseSystem 类``
```
class CourseSystem:
    def __init__(self):
        # 初始化根节点和课程字典
        self.root = TreeNode(0, 0)  # 根节点
        self.courses = {}  # 课程字典，用于存储课程编号与对应节点的映射
```
```CourseSystem 类```负责实现学生选课系统的各功能。包括初始化根节点和课程字典。

```build_tree_from_file 函数```
```
    def build_tree_from_file(self, filename):
```
从课程体系文件中读取数据，构建左孩子右兄弟二叉树表示。

```preorder_traversal、inorder_traversal、postorder_traversal 函数```
```
    # 先序遍历
    def preorder_traversal(self, root):
        if root:
            if root.CourseID:
                print(root.CourseID, end=" ")
            self.preorder_traversal(root.child)
            self.preorder_traversal(root.sibling)

    # 中序遍历
    def inorder_traversal(self, root):
        if root:
            self.inorder_traversal(root.child)
            if root.CourseID:
                print(root.CourseID, end=" ")
            if root.child:
                self.inorder_traversal(root.child.sibling)

    # 后序遍历
    def postorder_traversal(self, root):
        if root:
            self.postorder_traversal(root.child)
            if root.CourseID:
                print(root.CourseID, end=" ")
            self.postorder_traversal(root.sibling)
```

实现了二叉树的先序、中序、后序遍历功能。

```select_courses 函数```
```
def select_courses(self, root, credits_required):
        # 给出选课方案
```
通过```_select_courses_helper```方法，我们实现了一个递归算法，该算法在满足学分要求的前提下，优先选择先修课程。该算法通过遍历二叉树，选择当前课程并递归选择其兄弟和子课程，最终生成一个满足条件的选课方案。同时，通过```_prerequisites_satisfied```方法，确保所选课程的先修课程已在选课列表中。


# 使用示例
```if __name__ == "__main__":
    system = CourseSystem()
    root = system.build_tree_from_file("CourseHierarchy.txt")

    print("先序遍历:")
    system.preorder_traversal(root)
    print()

    print("中序遍历:")
    system.inorder_traversal(root)
    print()

    print("后序遍历:")
    system.postorder_traversal(root)
    print()

    credits_required = int(input("所需学分：")) 
    selected_courses = system.select_courses(root, credits_required)
    print("选课方案:")
    print(selected_courses)
```
## 三、总结
本实验成功设计了一个学生选课系统，通过左孩子右兄弟二叉树表示课程体系，实现了先序、中序、后序遍历，并生成了最优的选课方案。该系统能够满足大学学分制度下的选课需求，为学生提供了更加智能、高效的选课体验。在未来，可以考虑进一步优化算法，以处理更复杂的课程体系结构，提高系统的灵活性和适用性。